<app-breadcrumb [breadcrumb]="breadCrumb"></app-breadcrumb>

<form
  [formGroup]="userFormGroup"
  class="flex flex-col gap-8 border bg-white rounded-xl shadow p-4 sm:p-7 dark:bg-neutral-800"
>
  <!--  -->
  <div class="mb-2">
    <h2 class="text-xl font-bold text-gray-800 dark:text-neutral-200">
      Create a new user
    </h2>
    <p class="text-sm text-gray-600 dark:text-neutral-400">
      Create a new user account for your system.
    </p>
  </div>

  <nz-steps [nzCurrent]="current">
    <nz-step nzTitle="First Step"></nz-step>
    <nz-step nzTitle="Second Step"></nz-step>
    <nz-step nzTitle="Third Step"></nz-step>
  </nz-steps>

  <div class="steps-content">
    <!--  -->

    <div class="grid md:grid-cols-2 gap-x-14 gap-y-8">
      <!--  -->
      <div class="w-full flex justify-end">
        <img src="../../../../assets/images/Sign up.png" class="size-96" />
      </div>

      <!-- First Step -->
      <ng-container *ngIf="current == 0">
        <div class="flex flex-col justify-center gap-6 w-2/3">
          <!-- First Name -->
          <div class="">
            <label
              for="input-label-with-helper-text"
              class="block text-sm font-medium mb-2 dark:text-white"
              >First name</label
            >
            <input
              class="py-3 px-4 block w-full rounded-lg bg-gray-50 text-sm focus:outline-none focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600"
              placeholder="Enter first name"
              formControlName="firstName"
              [ngClass]="
                checkValidators('firstName')
                  ? 'border border-red-600'
                  : 'border border-gray-200'
              "
            />
            <span class="text-red-600" *ngIf="checkValidators('firstName')"
              >*First name is required</span
            >
          </div>

          <!-- Last Name -->
          <div class="">
            <label
              for="input-label-with-helper-text"
              class="block text-sm font-medium mb-2 dark:text-white"
              >Last name</label
            >
            <input
              class="py-3 px-4 block w-full border-gray-200 rounded-lg bg-gray-50 text-sm focus:outline-none border focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600"
              placeholder="Enter last name"
              formControlName="lastName"
              [ngClass]="
                checkValidators('lastName')
                  ? 'border border-red-600'
                  : 'border border-gray-200'
              "
            />
            <span class="text-red-600" *ngIf="checkValidators('lastName')"
              >*Last name is required</span
            >
          </div>

          <!-- Department -->
          <div class="">
            <label
              for="input-label-with-helper-text"
              class="block text-sm font-medium mb-2 dark:text-white"
              >Department</label
            >
            <select
              class="py-3 px-4 block w-full border-gray-200 rounded-lg bg-gray-50 text-sm focus:outline-none border focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600"
              formControlName="departmentDto"
            >
              <!-- <option selected="">Select department</option> -->
              <option selected="Development">Development</option>
              <option>RH</option>
            </select>
            <span class="text-red-600" *ngIf="checkValidators('departmentDto')"
              >*Department is required</span
            >
          </div>
        </div>
      </ng-container>

      <!-- Second Step -->
      <ng-container *ngIf="current == 1">
        <div class="flex flex-col justify-center gap-6 w-2/3">
          <!-- User name -->
          <div class="">
            <label
              for="input-label-with-helper-text"
              class="block text-sm font-medium mb-2 dark:text-white"
              >User name</label
            >
            <input
              class="py-3 px-4 block w-full border-gray-200 rounded-lg bg-gray-50 text-sm focus:outline-none border focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600"
              placeholder="Enter user name"
              formControlName="username"
              [ngClass]="
                checkValidators('username')
                  ? 'border border-red-600'
                  : 'border border-gray-200'
              "
            />
            <span class="text-red-600" *ngIf="checkValidators('username')"
              >*User name is required</span
            >
          </div>

          <!-- E-mail -->
          <div class="">
            <label
              for="input-label-with-helper-text"
              class="block text-sm font-medium mb-2 dark:text-white"
              >E-mail</label
            >
            <input
              class="py-3 px-4 block w-full border-gray-200 rounded-lg bg-gray-50 text-sm focus:outline-none border focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600"
              placeholder="Enter e-mail"
              formControlName="email"
              [ngClass]="
                checkValidators('email')
                  ? 'border border-red-600'
                  : 'border border-gray-200'
              "
            />
            <span class="text-red-600" *ngIf="checkValidators('email')"
              >*E-mail name is required</span
            >
          </div>
        </div>
      </ng-container>

      <!-- Third Step -->
      <ng-container *ngIf="current == 2">
        <div class="flex flex-col justify-center gap-6 w-2/3">
          <!-- Password -->
          <div class="">
            <label
              for="input-label-with-helper-text"
              class="block text-sm font-medium mb-2 dark:text-white"
              >Password</label
            >
            <input
              class="py-3 px-4 block w-full border-gray-200 rounded-lg bg-gray-50 text-sm focus:outline-none border focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600"
              placeholder="Enter password"
              formControlName="password"
              [ngClass]="
                checkValidators('password')
                  ? 'border border-red-600'
                  : 'border border-gray-200'
              "
            />
            <span class="text-red-600" *ngIf="checkValidators('password')"
              >*Password name is required</span
            >
          </div>

          <!-- Confirm Password -->
          <div class="">
            <label
              for="input-label-with-helper-text"
              class="block text-sm font-medium mb-2 dark:text-white"
              >Confirm password</label
            >
            <input
              class="py-3 px-4 block w-full border-gray-200 rounded-lg bg-gray-50 text-sm focus:outline-none border focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600"
              placeholder="Confirm password"
            />
          </div>
        </div>
      </ng-container>
    </div>
  </div>

  <div class="steps-action flex justify-between">
    <button
      nz-button
      nzType="default"
      (click)="pre()"
      [disabled]="current <= 0"
      class="ring-2 ring-white py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:hover:bg-neutral-800"
    >
      <span>Previous</span>
    </button>

    <div>
      <button
        nz-button
        nzType="default"
        (click)="next()"
        *ngIf="current < 2"
        class="ring-2 ring-white py-2 px-4 inline-flex items-center gap-x-1 text-sm font-medium rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none"
      >
        <span>Next</span>
      </button>
      <button
        nz-button
        nzType="primary"
        (click)="createUser(userFormGroup.value)"
        [disabled]="!userFormGroup.valid"
        *ngIf="current === 2"
        class="ring-2 ring-white py-2 px-4 inline-flex items-center gap-x-1 text-sm font-medium rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none"
      >
        <span>Done</span>
      </button>
    </div>
  </div>
</form>
